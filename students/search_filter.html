<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>search filter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/common_stylesheet.css">
    <link rel="stylesheet" href="css/search_filter_stylesheet.css">
</head>
</head>

<body>
    <header>
        <a href="home.html">
            <img src="image/logo/logo.png" alt="アプリのロゴ" class="header-logo"> <!-- 画像をヘッダーに追加 -->
        </a>
    </header>
    <main>
        <div class="attention">
            <h1>フィルター検索</h1>
        </div>

        <div class="content">
            <div class="filter-container">
                <!-- 年齢フィルター -->
                <div class="filter-group age-group">
                    <label for="age">
                        <h3>age:</h3>
                    </label>
                    <div class="range-slider">
                        <input type="range" id="age-min" min="20" max="60" value="20" oninput="updateAgeDisplay()">
                        <input type="range" id="age-max" min="20" max="60" value="60" oninput="updateAgeDisplay()">
                    </div>
                    <div class="age-values">
                        <span>min: <span id="age-min-display">20</span>歳</span>
                        <span>max: <span id="age-max-display">60</span>歳</span>
                    </div>
                </div>

                <!-- 学部フィルター -->
                <div class="filter-group department-group">
                    <label for="department">
                        <h3>department:</h3>
                    </label>
                    <select id="department">
                        <option value="">選択してください</option>
                        <option value="経済学部">経済学部</option>
                        <option value="医学部">医学部</option>
                        <option value="教育学部">教育学部</option>
                        <option value="農学部">農学部</option>
                    </select>
                </div>

                <!-- MBTI検索フィルター -->
                <div class="filter-group mbti-group">
                    <label>
                        <h3>MBTI:</h3>
                    </label>
                    <label><input type="checkbox" id="mbti-all" onclick="toggleMBTI(this)">不問</label>
                    <div id="mbti-options">
                        <div>
                            <label>エネルギーの方向</label>
                            <div class="mbti-index-group">
                                <label class="mbti-index"><input type="radio" name="mbti-2" value="I">I（内向的型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-2" value="E">E（外交型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-2" value="X"
                                        checked>X（どちらでもない・不問）</label>
                            </div>
                        </div>
                        <div>
                            <label>ものの見方</label>
                            <div class="mbti-index-group">
                                <label class="mbti-index"><input type="radio" name="mbti-3" value="N">N（直感型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-3" value="S">S（感覚型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-3" value="X"
                                        checked>X（どちらでもない・不問）</label>
                            </div>
                        </div>
                        <div>
                            <label>判断の仕方</label>
                            <div class="mbti-index-group">
                                <label class="mbti-index"><input type="radio" name="mbti-4" value="T">T（思考型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-4" value="F">F（感情型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-4" value="X"
                                        checked>X（どちらでもない・不問）</label>
                            </div>
                        </div>
                        <div>
                            <label>外部との接し方</label>
                            <div class="mbti-index-group">
                                <label class="mbti-index"><input type="radio" name="mbti-5" value="P">P（知覚型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-5" value="J">J（判断型）</label>
                                <label class="mbti-index"><input type="radio" name="mbti-5" value="X"
                                        checked>X（どちらでもない・不問）</label>
                            </div>
                        </div>
                    </div>
                </div>

                <button type="button" onclick="applyFilters()">検索</button>
            </div>
        </div>
    </main>

    <script>
        function updateAgeDisplay() {
            const ageMin = parseInt(document.getElementById("age-min").value);
            const ageMax = parseInt(document.getElementById("age-max").value);

            // 入れ替え防止
            if (ageMin > ageMax - 1) {
                document.getElementById("age-min").value = ageMax - 1;
            }
            if (ageMax < ageMin + 1) {
                document.getElementById("age-max").value = ageMin + 1;
            }

            document.getElementById("age-min-display").textContent = document.getElementById("age-min").value;
            document.getElementById("age-max-display").textContent = document.getElementById("age-max").value;
        }

        function toggleAllMBTI(checkbox) {
            const mbtiCheckboxes = document.querySelectorAll('input[name="mbti"]');
            if (checkbox.checked) {
                mbtiCheckboxes.forEach(cb => cb.checked = true);
            } else {
                mbtiCheckboxes.forEach(cb => cb.checked = false);
            }
        }

        function applyFilters() {
            const ageMin = document.getElementById("age-min").value;
            const ageMax = document.getElementById("age-max").value;
            const department = document.getElementById("department").value;

            const mbtiChecked = Array.from(document.querySelectorAll('input[name="mbti"]:checked'))
                .map(checkbox => checkbox.value);

            console.log("年齢:", `${ageMin}～${ageMax}`);
            console.log("部署:", department);
            console.log("MBTI:", mbtiChecked);
        }

        /*検索時のアクション*/
        function applyFilters() {
            // フィルタの適用処理など（必要に応じて追加）

            // profile.html に遷移する
            window.location.href = 'profile.html';
        }
    </script>

</body>

</html>